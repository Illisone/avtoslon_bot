<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–æ–¥–±–æ—Ä –∞–≤—Ç–æ</title>
    <link rel="stylesheet" href="styles.css"> 
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

<div class="header">
    <div class="logo-car"></div>
    <div class="logo-text">–ê–≤—Ç–æ—Å–ª–æ–Ω</div>
</div>

<div class="container">
    
    <div class="step-indicator" id="stepIndicator">
        </div>
    
    <form id="carForm">
        <div class="card form-step" data-step="1">
            <h2>1/6. –ö–∞–∫–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å –í–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?</h2>
            <div class="choice-grid" style="grid-template-columns: repeat(1, 1fr);">
                <button type="button" class="choice-button" data-value="–ù–æ–≤—ã–π">üöó –¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ</button>
                <button type="button" class="choice-button" data-value="–° –ø—Ä–æ–±–µ–≥–æ–º">‚öôÔ∏è –° –ø—Ä–æ–±–µ–≥–æ–º</button>
                <button type="button" class="choice-button" data-value="–ù–µ–≤–∞–∂–Ω–æ">ü§∑‚Äç‚ôÄÔ∏è –ù–µ–≤–∞–∂–Ω–æ</button>
            </div>
            <input type="hidden" name="–¢–∏–ø –∞–≤—Ç–æ" id="carType" required>
            <div class="nav-buttons">
                <button type="button" class="nav-button back" data-action="back">–ù–ê–ó–ê–î</button>
                <button type="button" class="nav-button next" data-action="next">–î–ê–õ–ï–ï</button>
            </div>
        </div>

        <div class="card form-step" data-step="2" style="display:none;">
            <h2>2/6. –£–∫–∞–∂–∏—Ç–µ –º–∞—Ä–∫—É –∏ –º–æ–¥–µ–ª—å –∞–≤—Ç–æ</h2>
            
            <p class="label">–ú–∞—Ä–∫–∞/–ú–æ–¥–µ–ª—å</p>
            <input type="text" name="–ú–∞—Ä–∫–∞/–ú–æ–¥–µ–ª—å" id="carModel" placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä–∫–∏..." required>
            
            <div id="autocompleteResults" class="autocomplete-list">
                </div>
            
            <div class="nav-buttons">
                <button type="button" class="nav-button back" data-action="back">–ù–ê–ó–ê–î</button>
                <button type="button" class="nav-button next" data-action="next">–î–ê–õ–ï–ï</button>
            </div>
        </div>

        <div class="card form-step" data-step="3" style="display:none;">
            <h2>3/6. –ñ–µ–ª–∞–µ–º—ã–π –≥–æ–¥ –≤—ã–ø—É—Å–∫–∞</h2>
            <p class="label">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2020 ‚Äî 2024)</p>
            <input type="hidden" name="–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞" id="carYear" required> 
            
            <div class="choice-grid" id="yearButtons">
                </div>
            <div class="nav-buttons">
                <button type="button" class="nav-button back" data-action="back">–ù–ê–ó–ê–î</button>
                <button type="button" class="nav-button next" data-action="next">–î–ê–õ–ï–ï</button>
            </div>
        </div>

        <div class="card form-step" data-step="4" style="display:none;">
            <h2>4/6. –ö–∞–∫ –í–∞—Å –∑–æ–≤—É—Ç?</h2>
            <p class="label">–í–∞—à–µ –ò–º—è</p>
            <input type="text" name="–ò–º—è" id="clientName" placeholder="–ò–≤–∞–Ω" required>
            <div class="nav-buttons">
                <button type="button" class="nav-button back" data-action="back">–ù–ê–ó–ê–î</button>
                <button type="button" class="nav-button next" data-action="next">–î–ê–õ–ï–ï</button>
            </div>
        </div>

        <div class="card form-step" data-step="5" style="display:none;">
            <h2>5/6. –í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</h2>
            <p class="label">–¢–µ–ª–µ—Ñ–æ–Ω</p>
            <input type="tel" name="–¢–µ–ª–µ—Ñ–æ–Ω" id="clientPhone" placeholder="+7 9–•–• –•–•–•-–•–•-–•–•" required>
            <div class="nav-buttons">
                <button type="button" class="nav-button back" data-action="back">–ù–ê–ó–ê–î</button>
                <button type="button" class="nav-button next" data-action="next">–ü–†–û–í–ï–†–ò–¢–¨ –î–ê–ù–ù–´–ï</button>
            </div>
        </div>
        
        <div class="card form-step" data-step="6" style="display:none;">
            <h2>6/6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ</h2>
            <div id="reviewData">
                </div>
            
            <div class="nav-buttons">
                <button type="button" class="nav-button back" data-action="back">–ù–ê–ó–ê–î</button>
                <button type="button" class="nav-button next active" id="finalSubmitButton" data-action="submit">–û–¢–ü–†–ê–í–ò–¢–¨</button>
            </div>
        </div>
        
    </form>
</div>

<script>
    // =======================================
    // JAVASCRIPT –õ–û–ì–ò–ö–ê –î–õ–Ø MINI APP
    // =======================================
    
    const Telegram = window.Telegram.WebApp;
    Telegram.ready();
    Telegram.expand(); 
    
    const formSteps = document.querySelectorAll('.form-step');
    const stepIndicator = document.getElementById('stepIndicator');
    const yearButtonsContainer = document.getElementById('yearButtons');
    const reviewDataContainer = document.getElementById('reviewData');
    const totalSteps = formSteps.length; 
    let currentStep = 1;

    let startYear = null;
    let endYear = null;

    // --- –õ–û–ì–ò–ö–ê –ê–í–¢–û–ü–û–î–°–ö–ê–ó–ö–ò (–®–ê–ì 2) ---
    
    const CAR_BRANDS = [
        "Toyota", "Lexus", "Mercedes-Benz", "BMW", "Audi", "Hyundai", 
        "Kia", "Chevrolet", "Ford", "Honda", "Nissan", "Mazda", 
        "Volkswagen", "Geely", "Chery", "BYD", "Haval", "Exeed", 
        "LADA", "Porsche", "Land Rover", "Volvo"
    ];

    const carModelInput = document.getElementById('carModel');
    const autocompleteResults = document.getElementById('autocompleteResults');

    // –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø –ü–û–î–°–ö–ê–ó–û–ö
    function updateAutocomplete() {
        const inputVal = carModelInput.value.trim().toLowerCase();
        autocompleteResults.innerHTML = ''; 

        if (inputVal.length === 0) {
            autocompleteResults.style.display = 'none';
            return;
        }

        const filteredBrands = CAR_BRANDS.filter(brand => 
            brand.toLowerCase().startsWith(inputVal)
        ).slice(0, 5); 

        if (filteredBrands.length === 0) {
            autocompleteResults.style.display = 'none';
            return;
        }

        filteredBrands.forEach(brand => {
            const item = document.createElement('div');
            item.classList.add('autocomplete-item');
            
            const boldPart = brand.substring(0, inputVal.length);
            const restPart = brand.substring(inputVal.length);
            item.innerHTML = `<strong>${boldPart}</strong>${restPart}`;
            
            item.addEventListener('click', () => {
                carModelInput.value = brand + ' ';
                autocompleteResults.innerHTML = ''; 
                autocompleteResults.style.display = 'none';
                carModelInput.focus(); 
                updateUI(); 
            });
            
            autocompleteResults.appendChild(item);
        });

        autocompleteResults.style.display = 'block';
    }
    
    // --- –§–£–ù–ö–¶–ò–Ø –ì–ï–ù–ï–†–ê–¶–ò–ò –ì–û–î–û–í ---
    function generateYearButtons() {
        const currentYear = new Date().getFullYear();
        for (let year = currentYear + 1; year >= 2015; year--) {
            const button = document.createElement('button');
            button.type = 'button';
            button.classList.add('choice-button', 'year-range-button');
            button.dataset.value = year;
            button.textContent = year;
            yearButtonsContainer.appendChild(button);
        }
    }
    
    // ----------------------------------------
    // –£–ü–†–ê–í–õ–ï–ù–ò–ï –ö–ù–û–ü–ö–ê–ú–ò TELEGRAM 
    // ----------------------------------------
    if (Telegram.themeParams) {
        Telegram.MainButton.hide(); 
        Telegram.BackButton.hide();
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" TWA
        Telegram.BackButton.onClick(() => {
            if (currentStep > 1) {
                currentStep--;
                updateUI();
            } else {
                Telegram.close();
            }
        });
    }
    
    // ----------------------------------------
    // –û–ë–†–ê–ë–û–¢–ß–ò–ö –ù–ê–í–ò–ì–ê–¶–ò–ò (–ù–ê–ó–ê–î/–î–ê–õ–ï–ï/–û–¢–ü–†–ê–í–ò–¢–¨)
    // ----------------------------------------
    
    function handleNavigation(event) {
        const button = event.target.closest('.nav-button');
        if (!button) return;
        
        const action = button.dataset.action;

        if (action === 'back') {
            currentStep--;
            updateUI();
        } else if (action === 'next') {
            if (!button.classList.contains('active')) return;

            if (checkStepValidity()) {
                currentStep++;
                updateUI();
            } else {
                Telegram.showAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π –ø—É–Ω–∫—Ç.');
            }
        } else if (action === 'submit') {
            submitForm();
        }
    }

    document.getElementById('carForm').addEventListener('click', handleNavigation);
    
    // ----------------------------------------
    // –§–£–ù–ö–¶–ò–ò –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–Ø –°–û–°–¢–û–Ø–ù–ò–Ø –ò –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø
    // ----------------------------------------

    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç startYear –∏ endYear –∏–∑ –ø–æ–ª—è #carYear
    function loadYearRangeState() {
        const yearValue = document.getElementById('carYear').value.trim();
        startYear = null;
        endYear = null;

        if (yearValue) {
            if (yearValue.includes('-')) {
                const parts = yearValue.split('-').map(s => parseInt(s.trim()));
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –æ–±–µ —á–∞—Å—Ç–∏ - —á–∏—Å–ª–∞ –∏ –Ω–µ NaN
                if (!isNaN(parts[0]) && !isNaN(parts[1])) {
                    startYear = parts[0];
                    endYear = parts[1];
                }
            } else {
                const year = parseInt(yearValue);
                if (!isNaN(year)) {
                    startYear = year;
                }
            }
        }
    }

    function createReviewField(label, value, step) {
        const div = document.createElement('div');
        div.classList.add('review-field');
        div.innerHTML = `
            <span class="review-field-label">${label}</span>
            <span class="review-field-value">
                ${value}
                <button class="review-field-edit" data-step="${step}" onclick="editStep(${step})">‚úèÔ∏è</button>
            </span>
        `;
        return div;
    }
    
    function populateReviewData() {
        reviewDataContainer.innerHTML = '';
        const formData = {};
        document.querySelectorAll('input').forEach(input => {
            if (input.name && input.value) {
                formData[input.name] = input.value;
            }
        });

        const labelMap = {
            '–¢–∏–ø –∞–≤—Ç–æ': '–¢–∏–ø', 
            '–ú–∞—Ä–∫–∞/–ú–æ–¥–µ–ª—å': '–ú–∞—Ä–∫–∞ –∏ –º–æ–¥–µ–ª—å', 
            '–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞': '–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞', 
            '–ò–º—è': '–ò–º—è', 
            '–¢–µ–ª–µ—Ñ–æ–Ω': '–¢–µ–ª–µ—Ñ–æ–Ω'
        };

        for (const key in formData) {
            const label = labelMap[key] || key;
            const value = formData[key];
            
            let stepForEdit = 0;
            if (key === '–¢–∏–ø –∞–≤—Ç–æ') stepForEdit = 1;
            else if (key === '–ú–∞—Ä–∫–∞/–ú–æ–¥–µ–ª—å') stepForEdit = 2;
            else if (key === '–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞') stepForEdit = 3;
            else if (key === '–ò–º—è') stepForEdit = 4;
            else if (key === '–¢–µ–ª–µ—Ñ–æ–Ω') stepForEdit = 5;

            if (stepForEdit > 0) {
                 reviewDataContainer.appendChild(createReviewField(label, value, stepForEdit));
            }
        }
    }
    
    // –§–£–ù–ö–¶–ò–Ø –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø –®–ê–ì–ê (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞)
    window.editStep = function(step) {
        currentStep = step;
        updateUI();
    }
    
    // ----------------------------------------
    // –£–ü–†–ê–í–õ–ï–ù–ò–ï UI
    // ----------------------------------------

    function updateStepDots() {
        stepIndicator.innerHTML = '';
        for (let i = 1; i <= totalSteps - 1; i++) { 
            const dot = document.createElement('span');
            dot.classList.add('dot');
            if (i <= currentStep) {
                dot.classList.add('active');
            }
            stepIndicator.appendChild(dot);
        }
    }

    function updateUI() {
        updateStepDots();

        formSteps.forEach(step => {
            const stepIndex = parseInt(step.dataset.step);
            const isCurrent = (stepIndex === currentStep);
            step.style.display = isCurrent ? 'block' : 'none';

            if (isCurrent) {
                const nextButton = step.querySelector('.nav-button.next');
                const backButton = step.querySelector('.nav-button.back');
                
                if (backButton) {
                    backButton.style.display = (currentStep === 1) ? 'none' : 'block';
                }
                
                if (nextButton) {
                    if (checkStepValidity()) {
                        nextButton.classList.add('active');
                    } else {
                        nextButton.classList.remove('active');
                    }
                }
                
                // –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –°–û–°–¢–û–Ø–ù–ò–Ø –î–õ–Ø –¢–ï–ö–£–©–ï–ì–û –®–ê–ì–ê
                if (stepIndex === 1) {
                    const carType = document.getElementById('carType').value;
                    document.querySelectorAll('.form-step[data-step="1"] .choice-button').forEach(btn => {
                        btn.classList.remove('selected');
                        if (btn.dataset.value === carType) {
                            btn.classList.add('selected');
                        }
                    });
                }
                
                if (stepIndex === 2) {
                    updateAutocomplete();
                }
                
                if (stepIndex === 3) {
                    loadYearRangeState();
                    visualizeYearRange();
                }
            }
        });
        
        if (currentStep === totalSteps) { // –®–∞–≥ 6
            populateReviewData();
        }
        
        const currentStepElement = document.querySelector(`.form-step[data-step="${currentStep}"]`);
        // –ò—â–µ–º –ø–µ—Ä–≤–æ–µ –≤–∏–¥–∏–º–æ–µ –ø–æ–ª–µ –≤–≤–æ–¥–∞
        const firstInput = currentStepElement ? currentStepElement.querySelector('input:not([type="hidden"])') : null;

        if (firstInput) {
            // –î–æ–±–∞–≤–ª—è–µ–º { preventScroll: true } –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è "–ø—Ä—ã–∂–∫–∞" —ç–∫—Ä–∞–Ω–∞
            setTimeout(() => {
                firstInput.focus({ preventScroll: true }); 
            }, 10); 
        }
    }
    
    // ----------------------------------------
    // –ü–†–û–í–ï–†–ö–ê –í–ê–õ–ò–î–ù–û–°–¢–ò –¢–ï–ö–£–©–ï–ì–û –®–ê–ì–ê
    // ----------------------------------------

    function checkStepValidity() {
        switch (currentStep) {
            case 1: 
                return !!document.getElementById('carType').value;
            case 2: 
                return !!document.getElementById('carModel').value.trim();
            case 3: 
                return !!document.getElementById('carYear').value.trim();
            case 4: 
                return !!document.getElementById('clientName').value.trim();
            case 5: 
                const phoneValue = document.getElementById('clientPhone').value.trim();
                return phoneValue.length > 5;
            case 6: 
                return true; 
            default:
                return false;
        }
    }
    
    // --- –í–ò–ó–£–ê–õ–ò–ó–ê–¶–ò–Ø –î–ò–ê–ü–ê–ó–û–ù–ê –ì–û–î–û–í ---
    function visualizeYearRange() {
        const yearInput = document.getElementById('carYear');
        const buttons = document.querySelectorAll('.year-range-button');
        
        buttons.forEach(btn => {
            btn.classList.remove('selected', 'in-range');
        });

        if (startYear && endYear) {
            const start = Math.min(startYear, endYear);
            const end = Math.max(startYear, endYear);
            yearInput.value = `${start}-${end}`;
            
            buttons.forEach(btn => {
                const year = parseInt(btn.dataset.value);
                if (year >= start && year <= end) {
                    btn.classList.add('in-range');
                }
                if (year === start || year === end) {
                    btn.classList.add('selected'); 
                    btn.classList.remove('in-range'); 
                }
            });
        } else if (startYear) {
            yearInput.value = startYear;
            document.querySelector(`.year-range-button[data-value="${startYear}"]`)?.classList.add('selected');
        } else {
            yearInput.value = '';
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–î–ê–õ–ï–ï" –≤—Ä—É—á–Ω—É—é –ø–æ—Å–ª–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
        const currentStepElement = document.querySelector(`.form-step[data-step="${currentStep}"]`);
        const nextButton = currentStepElement ? currentStepElement.querySelector('.nav-button.next') : null;
        if (nextButton) {
             if (checkStepValidity()) {
                nextButton.classList.add('active');
            } else {
                nextButton.classList.remove('active');
            }
        }
    }
    
    // ----------------------------------------
    // –û–ë–†–ê–ë–û–¢–ö–ê –í–´–ë–û–†–ê –ò –ü–û–õ–ï–ô –í–í–û–î–ê
    // ----------------------------------------

    // –®–∞–≥ 1: –í—ã–±–æ—Ä —Ç–∏–ø–∞ –∞–≤—Ç–æ
    document.querySelectorAll('.form-step[data-step="1"] .choice-button').forEach(button => {
        button.addEventListener('click', function() {
            document.querySelectorAll('.form-step[data-step="1"] .choice-button').forEach(btn => btn.classList.remove('selected'));
            this.classList.add('selected');
            document.getElementById('carType').value = this.dataset.value;
            updateUI(); 
        });
    });

    // --- –õ–û–ì–ò–ö–ê –í–´–ë–û–†–ê –î–ò–ê–ü–ê–ó–û–ù–ê –ì–û–î–û–í (–®–ê–ì 3) ---
    function handleYearSelection(event) {
        const button = event.target.closest('.year-range-button');
        if (!button) return;
        
        const year = parseInt(button.dataset.value);

        if (startYear === null) {
            startYear = year;
            endYear = null;
        } else if (endYear === null) {
            // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω–∞—è –¥–∞—Ç–∞ –º–µ–Ω—å—à–µ –Ω–∞—á–∞–ª—å–Ω–æ–π, –º–µ–Ω—è–µ–º –∏—Ö –º–µ—Å—Ç–∞–º–∏
            if (year < startYear) {
                endYear = startYear;
                startYear = year;
            } else {
                endYear = year;
            }
        } else {
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–∏–∞–ø–∞–∑–æ–Ω, –Ω–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—ã–π
            startYear = year;
            endYear = null;
        }
        
        visualizeYearRange();
    }
    
    yearButtonsContainer.addEventListener('click', handleYearSelection);


    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
    document.querySelectorAll('input').forEach(input => {
        input.addEventListener('input', () => {
            // –û–±–Ω–æ–≤–ª—è–µ–º UI –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∫–Ω–æ–ø–∫–∏ "–î–ê–õ–ï–ï"
            if (currentStep !== 3) {
                updateUI();
            }
        });
    });
    
    // –û—Ç–¥–µ–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏
    carModelInput.addEventListener('input', () => {
        updateAutocomplete();
        updateUI(); 
    });
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
    carModelInput.addEventListener('blur', () => {
        // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞, —á—Ç–æ–±—ã –∫–ª–∏–∫ –ø–æ –ø–æ–¥—Å–∫–∞–∑–∫–µ —É—Å–ø–µ–ª —Å—Ä–∞–±–æ—Ç–∞—Ç—å
        setTimeout(() => {
            autocompleteResults.style.display = 'none';
        }, 150);
    });

    carModelInput.addEventListener('focus', () => {
        updateAutocomplete(); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ, –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç
    });

    
    // ----------------------------------------
    // –û–¢–ü–†–ê–í–ö–ê –§–û–†–ú–´
    // ----------------------------------------

    function submitForm() {
        const finalButton = document.getElementById('finalSubmitButton');
        if (finalButton.textContent === '–û–¢–ü–†–ê–í–õ–ï–ù–û') return; 
        
        const formData = {};
        document.querySelectorAll('input').forEach(input => {
            if (input.name && input.value) {
                formData[input.name] = input.value;
            }
        });
        
        try {
            Telegram.sendData(JSON.stringify(formData));
            
            finalButton.textContent = '–û–¢–ü–†–ê–í–õ–ï–ù–û';
            finalButton.classList.remove('active');
            
            reviewDataContainer.innerHTML = '<h3>‚úÖ –ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!</h3><p>–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –≤—ã–±–æ—Ä. –°–∫–æ—Ä–æ —Å –≤–∞–º–∏ —Å–≤—è–∂–µ—Ç—Å—è –º–µ–Ω–µ–¥–∂–µ—Ä.</p>';
            
        } catch (error) {
            Telegram.showAlert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö: ' + error.message);
        }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    generateYearButtons(); 
    updateUI(); 
</script>

</body>
</html>